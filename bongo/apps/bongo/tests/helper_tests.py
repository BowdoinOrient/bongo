from django.test import TestCase
from bongo.apps.bongo.helpers import tagify

# This is the real article as it's represented in the database (woof)
articlehtml = """
<p align="left">It's nerve-wracking enough to open the door at a party and find a
security officer on the other side. Imagine opening that door naked.</p>
That's what happened at the first annual naked party in the spring of
2004, when Anna Troyansky '06 answered the door for a female security
officer. Consistent with the theme of the party, Troyansky was
completely naked.</p>
The security officer simply asked, "Can you turn the music down?"</p>
"I remember peering around the door, reassuring them that we would
turn the music down," Troyansky said. "I think they were surprised, as
well, to be greeted like that, but I don't think they realized at that
point that there were another dozen naked people in the apartment. Who knows what crossed their minds."</p>
<p align="left">At the inaugural naked party, Troyansky was one of only 12 people at the party that could have opened the door and given Security something to look at besides an unregistered keg. Now, the annual Bowdoin naked party thrives, with attendance reaching almost 80 people at the largest party.</p>
<p align="left">"Basically, it started with us waking up one morning and deciding not to wear clothes," said Brendan Mortimer '06, who started Bowdoin's naked party tradition with Vanessa Lind '06. "But, there were pragmatic problems. We couldn't really leave the apartment without clothes on. So, we thought, 'Why don't we just invite our friends over?'"</p>
<p align="left">Mortimer and Lind, who were also inspired by friends who sometimes declared "naked time" in Quinby House, held their party in Mayflower Apartments the same night as Troyansky's underwear party. Since both parties were relatively small and the underwear partygoers were halfway to Mortimer and Lind's theme, they joined the naked party.</p>
<p align="left">"The proponents of the underwear party became the biggest proponents of the naked party," Lind said. "Parties tend to be pretty similar, and people love something novel in a party. It was an infectious thing, and everyone became more comfortable."</p>
<p align="left">Lind explained that while there was a core of naked partygoers, mainly Ultimate Frisbee players, the party grew because of curiosity. There were the first-timers, and there were those who failed to show up but heard the party talked about enough that they were convinced they had to make it to the next one.</p>
<p align="left">At the end of the spring 2006 semester, the entire senior class was invited to Mortimer and Lind's final naked party.</p>
<p align="left">"It added to the anticipation," Mortimer said. "People talked the most when they had gone the first time or when they missed it. It was exciting to see."</p>
<p align="left">At this year's annual naked party on November 11, partygoers, who asked to remain unnamed, agreed with Mortimer and Lind that after the initial five minutes, the nakedness was no longer awkward because everyone disrobed before entering the party and because there is an the acceptance of everyone's nakedness, regardless of body type. As a condition for reporting this story, the Orient agreed not to disclose the location of the party.</p>
<p align="left">"What keeps it from being awkward? The fact that everyone's naked and they don't want people staring at their genitals, so they don't do it to other people," said one.</p>
<p align="left">"When everyone's shown everything, there's no need to be awkward," Mortimer said. "Most people have the realization later in the night that, 'Hey, everyone's naked and it's been like that.'"</p>
<p align="left">"I think a lot of people feel much more comfortable with and confident about their bodies and feel very liberated after attending a naked party," Troyansky added.</p>
<p align="left">The core of naked aficionados is accepting of newcomers and of all body types, stating that everyone embraces the diversity of the bodies walking through the door.</p>
<p align="left">"There's a veteran community of naked people who welcome new participants without scrutinizing," one newcomer said. "They're actually very supportive, but not so supportive it's awkward."</p>
<p align="left">One partygoer's comments didn't even necessarily pertain to nudity: "The most interesting thing about naked parties is that tattoos start showing up so much."</p>
<p align="left">Minus the grinding and clothes present at most college parties, the naked party is just like any other party. There's music, beer pong, and yes, even keg stands.</p>
<p align="left">"Miraculous things happen," one partygoer said of people who are on the fence about attending the naked party. "People get drunk and start thinking, 'What would that be like?'"</p>
<p align="left">When pressed further as to what "that" was, he answered that students' curiosity often leads them to forgo their inhibitions and strip down.</p>
<p align="left">"You weren't curious when you came?" he asked. "You thought we might be cheating?"</p>
<p align="left">A naked party is a hard theme to fake, and one that demands total participation to make it work. One house resident, who wasn't in the main party area, was naked in his room doing schoolwork.</p>
<p align="left">"I'm naked in spirit," he said. "And, well, I'm actually naked."</p>
<p align="left">A disrobing room outside the actual party made it so everyone kept the "no nudity, no entry" motto without freezing in the Maine weather. If it's difficult digging through coats in a crowd, it's hilarious digging through socks, shoes, boxers, and bras with five other people.</p>
<p align="left">For a good portion of the partygoers, it was their first foray into party nudity. But, because of the support and the acceptance of all body types, that foray wasn't as difficult as many initially believed.</p>
<p align="left">"There's always the next group that's convinced they have to go," Lind said, who has done interviews about the growing naked party trend for Canadian nudist magazine "Au Naturel" and "The Daily Free Press," Boston University's independent student newspaper.</p>
<p align="left">If nothing else, according to Lind, "Being naked is a good way to keep Security from coming because sometimes they just don't want to deal with the consequences."</p>
<p align="left">Just keep the music down and the clothes off.</p>
<p align="left">    </p>
<p align="left"></p>
"""

# This is a version I cleaned up by hand
articletext = 'It\'s nerve-wracking enough to open the door at a party and find a security officer on the other side. Imagine opening that door naked. That\'s what happened at the first annual naked party in the spring of 2004, when Anna Troyansky \'06 answered the door for a female security officer. Consistent with the theme of the party, Troyansky was completely naked. The security officer simply asked, "Can you turn the music down?" "I remember peering around the door, reassuring them that we wouldturn the music down," Troyansky said. "I think they were surprised, aswell, to be greeted like that, but I don\'t think they realized at that point that there were another dozen naked people in the apartment. Who knows what crossed their minds." At the inaugural naked party, Troyansky was one of only 12 people at the party that could have opened the door and given Security something to look at besides an unregistered keg. Now, the annual Bowdoin naked party thrives, with attendance reaching almost 80 people at the largest party."Basically, it started with us waking up one morning and deciding not to wear clothes," said Brendan Mortimer \'06, who started Bowdoin\'s naked party tradition with Vanessa Lind \'06. "But, there were pragmatic problems. We couldn\'t really leave the apartment without clothes on. So, we thought, \'Why don\'t we just invite our friends over?\'"Mortimer and Lind, who were also inspired by friends who sometimes declared "naked time" in Quinby House, held their party in Mayflower Apartments the same night as Troyansky\'s underwear party. Since both parties were relatively small and the underwear partygoers were halfway to Mortimer and Lind\'s theme, they joined the naked party. "The proponents of the underwear party became the biggest proponents of the naked party," Lind said. "Parties tend to be pretty similar, and people love something novel in a party. It was an infectious thing, and everyone became more comfortable."Lind explained that while there was a core of naked partygoers, mainly Ultimate Frisbee players, the party grew because of curiosity. There were the first-timers, and there were those who failed to show up but heard the party talked about enough that they were convinced they had to make it to the next one.At the end of the spring 2006 semester, the entire senior class was invited to Mortimer and Lind\'s final naked party. "It added to the anticipation," Mortimer said. "People talked the most when they had gone the first time or when they missed it. It was exciting to see."At this year\'s annual naked party on November 11, partygoers, who asked to remain unnamed, agreed with Mortimer and Lind that after the initial five minutes, the nakedness was no longer awkward because everyone disrobed before entering the party and because there is an the acceptance of everyone\'s nakedness, regardless of body type. As a condition for reporting this story, the Orient agreed not to disclose the location of the party."What keeps it from being awkward? The fact that everyone\'s naked and they don\'t want people staring at their genitals, so they don\'t do it to other people," said one."When everyone\'s shown everything, there\'s no need to be awkward," Mortimer said. "Most people have the realization later in the night that, \'Hey, everyone\'s naked and it\'s been like that.\'" "I think a lot of people feel much more comfortable with and confident about their bodies and feel very liberated after attending a naked party," Troyansky added.The core of naked aficionados is accepting of newcomers and of all body types, stating that everyone embraces the diversity of the bodies walking through the door."There\'s a veteran community of naked people who welcome new participants without scrutinizing," one newcomer said. "They\'re actually very supportive, but not so supportive it\'s awkward."One partygoer\'s comments didn\'t even necessarily pertain to nudity: "The most interesting thing about naked parties is that tattoos start showing up so much. "Minus the grinding and clothes present at most college parties, the naked party is just like any other party. There\'s music, beer pong, and yes, even keg stands."Miraculous things happen," one partygoer said of people who are on the fence about attending the naked party. "People get drunk and start thinking, \'What would that be like?\'" When pressed further as to what "that" was, he answered that students\' curiosity often leads them to forgo their inhibitions and strip down. "You weren\'t curious when you came?" he asked. "You thought we might be cheating?" A naked party is a hard theme to fake, and one that demands total participation to make it work. One house resident, who wasn\'t in the main party area, was naked in his room doing schoolwork. "I\'m naked in spirit," he said. "And, well, I\'m actually naked. "A disrobing room outside the actual party made it so everyone kept the "no nudity, no entry" motto without freezing in the Maine weather. If it\'s difficult digging through coats in a crowd, it\'s hilarious digging through socks, shoes, boxers, and bras with five other people.For a good portion of the partygoers, it was their first foray into party nudity. But, because of the support and the acceptance of all body types, that foray wasn\'t as difficult as many initially believed. "There\'s always the next group that\'s convinced they have to go," Lind said, who has done interviews about the growing naked party trend for Canadian nudist magazine "Au Naturel" and "The Daily Free Press," Boston University\'s independent student newspaper. If nothing else, according to Lind, "Being naked is a good way to keep Security from coming because sometimes they just don\'t want to deal with the consequences." Just keep the music down and the clothes off.'

class TaggerTestCase(TestCase):
    def test_tagify(self):
        """Test that tagify() can reproducibly find good tags for an article

        Furthermore, test that the tags are chosen irrelevant of HTML in the article
        """

        tagify(articletext)

        tagify(articlehtml)
